import{C as o}from"./4u0pgEpR.js";class a{constructor(e){this.name=e.name,this.path=e.path,this.type=e.type,this.directories=e.directories||[],this.loading={create:!1,delete:!1,code:!1}}static async all(){const t=await(await o.fetchContainerByName("frankenphp_devner")).cmd("ls -a /var/www/html/*/");return this.groupProjects(t)}static async fetchProject(e){const n=await(await o.fetchContainerByName("frankenphp_devner")).cmd(`ls -a /var/www/html/${e}/`);return this.groupProject(e,n)}async performAction(e,t={}){this.loading[e]=!0,console.log(`Performing action ${e} on project with name: ${this.name}`),await $fetch(`/api/project/${this.name}/${e}`,{method:"POST",body:t}),this.loading[e]=!1}async code(){await this.performAction("code")}async delete(){await this.performAction("delete")}async create(e,t){await this.performAction("create",{name:e,type:t})}getName(){return this.name}getPath(){return this.path}getType(){return this.type}static groupProjects(e){const t={},n=[];let r="";e.forEach(i=>{i.endsWith(":")?(r=i.replace(":",""),r=r.replace("/var/www/html/",""),r=r.replace("/",""),t[r]=[]):r&&t[r].push(i)});for(const i in t)i==="."||i===".."||i==="gui"||n.push(new a({name:i,path:`/var/www/html/${i}`,type:this.identifyProject(t[i]),directories:t[i]}));return n}static groupProject(e,t){const n=t.map(r=>r.trim());return new a({name:e,path:`/var/www/html/${e}`,type:this.identifyProject(n),directories:n})}static identifyProject(e){return e.includes("artisan")?{label:"Laravel",color:"red"}:e.includes("wp-config.php")?{label:"WordPress",color:"blue"}:e.includes("package.json")?{label:"Node.js",color:"green"}:{label:"Unknown",color:"gray"}}isLoading(e){return this.loading[e]}}export{a as P};
